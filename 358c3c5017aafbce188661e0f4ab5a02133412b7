{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "4ffebf89_ac98b7f4",
        "filename": "tasks/multi_cell_v2_osp17/templates/post_tasks.sh",
        "patchSetId": 11
      },
      "lineNbr": 6,
      "author": {
        "id": 1006992
      },
      "writtenOn": "2022-10-18T21:00:08Z",
      "side": 1,
      "message": "Do we know for the 16 scenario that these files will have been created? \n\nI understand for 17 the UC doesn\u0027t have nova and that this script is branchless, but couldn\u0027t use add a condition so that is uses the old approach for 16 and thew new approach for 17 because customers are still going to use the old approach and we probably don\u0027t want to change 16 as it\u0027s now stable.",
      "revId": "358c3c5017aafbce188661e0f4ab5a02133412b7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6bcf9700_b0609bac",
        "filename": "tasks/multi_cell_v2_osp17/templates/post_tasks.sh",
        "patchSetId": 11
      },
      "lineNbr": 6,
      "author": {
        "id": 1010723
      },
      "writtenOn": "2022-10-19T12:19:00Z",
      "side": 1,
      "message": "for 16.x there is no changes expected, and I\u0027ve split it into \ntasks/multi_cell_v2_osp16/templates/post_tasks.sh (unchanged) and this one, for 17.x only. Does that reply to your question?",
      "parentUuid": "4ffebf89_ac98b7f4",
      "revId": "358c3c5017aafbce188661e0f4ab5a02133412b7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "04947b83_f9f79d9a",
        "filename": "tasks/multi_cell_v2_osp17/templates/post_tasks.sh",
        "patchSetId": 11
      },
      "lineNbr": 6,
      "author": {
        "id": 1006992
      },
      "writtenOn": "2022-10-19T14:58:42Z",
      "side": 1,
      "message": "Yes, I understand this script is only run for 17. Thanks for clarifying.",
      "parentUuid": "6bcf9700_b0609bac",
      "revId": "358c3c5017aafbce188661e0f4ab5a02133412b7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6f6d3f3b_1dc29900",
        "filename": "tasks/multi_cell_v2_osp17/templates/post_tasks.sh",
        "patchSetId": 11
      },
      "lineNbr": 6,
      "author": {
        "id": 1017127
      },
      "writtenOn": "2022-10-19T15:08:30Z",
      "side": 1,
      "message": "Does it make sense to just rename multi_cell_v2_osp16 to just multi_cell_v2_osp and create branching template paths for 16 and 17+? Then update [1] to call the correct template versions. With all changes with preliminary steps for deploying in 17 I think [2] will result in a lot of conditional tasks for deployment.  It may be cleaner to have two pre.yml\u0027s based on the version.  WDYT? If you are ok with the approach I can submit it as a depends-on or as part of this commit.\n\n\n[1] https://github.com/rhos-infra/tripleo-config-changes/blob/master/tasks/multi_cell_v2_osp16/main.yml\n[2] https://github.com/rhos-infra/tripleo-config-changes/blob/master/tasks/multi_cell_v2_osp16/pre.yml",
      "parentUuid": "04947b83_f9f79d9a",
      "revId": "358c3c5017aafbce188661e0f4ab5a02133412b7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0f3d20c2_f9162564",
        "filename": "tasks/multi_cell_v2_osp17/templates/post_tasks.sh",
        "patchSetId": 11
      },
      "lineNbr": 6,
      "author": {
        "id": 1010723
      },
      "writtenOn": "2022-10-19T15:18:22Z",
      "side": 1,
      "message": "it looks good to me, please go for it",
      "parentUuid": "6f6d3f3b_1dc29900",
      "revId": "358c3c5017aafbce188661e0f4ab5a02133412b7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "84a6e8f5_8227966d",
        "filename": "tasks/multi_cell_v2_osp17/templates/post_tasks.sh",
        "patchSetId": 11
      },
      "lineNbr": 12,
      "author": {
        "id": 1006992
      },
      "writtenOn": "2022-10-18T21:00:08Z",
      "side": 1,
      "message": "If you do the following here:\n\n  -e internal_api_vip\u003d172.17.1.63\n\nThe does the job not hit BZ 2089512?",
      "revId": "358c3c5017aafbce188661e0f4ab5a02133412b7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "085b629e_601996c9",
        "filename": "tasks/multi_cell_v2_osp17/templates/post_tasks.sh",
        "patchSetId": 11
      },
      "lineNbr": 12,
      "author": {
        "id": 1010723
      },
      "writtenOn": "2022-10-19T12:37:09Z",
      "side": 1,
      "message": "we can\u0027t do that as the hosts adding task [0] expects the value properly fetched from the merged inventories groups vars for controllers vs cellcontrollers\n\n\n[0] https://github.com/openstack/tripleo-ansible/blob/13e9c808977f5a717d7ff33b87df9afed3b90c6f/tripleo_ansible/roles/tripleo_cellv2/tasks/add_internalapi_hosts_entries.yml#L1",
      "parentUuid": "84a6e8f5_8227966d",
      "revId": "358c3c5017aafbce188661e0f4ab5a02133412b7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "69e793b1_1e61b333",
        "filename": "tasks/multi_cell_v2_osp17/templates/post_tasks.sh",
        "patchSetId": 11
      },
      "lineNbr": 12,
      "author": {
        "id": 1006992
      },
      "writtenOn": "2022-10-19T14:58:42Z",
      "side": 1,
      "message": "Not sure I agree. I do see as you point out in [0] the explicit call hostvars:\n\n hostvars[item][\u0027internal_api_ip\u0027]\n\nbut according to the docs [1] and my testing [2] passing -e always wins even when you explicitly reference hostvars. Maybe I\u0027m misunderstanding something.\n\nThat said I\u0027m still in favor of using Ollie\u0027s patch [3] to address this.\n\n[0] https://github.com/openstack/tripleo-ansible/blob/13e9c808977f5a717d7ff33b87df9afed3b90c6f/tripleo_ansible/roles/tripleo_cellv2/tasks/add_internalapi_hosts_entries.yml#L23\n\n[1] https://docs.ansible.com/ansible/latest/reference_appendices/general_precedence.html#using-e-extra-variables-at-the-command-line\n\n[2] https://paste.opendev.org/show/bPRktv1MHXgAUbN98pfM/\n\n[3] https://review.opendev.org/c/openstack/tripleo-common/+/861804",
      "parentUuid": "085b629e_601996c9",
      "revId": "358c3c5017aafbce188661e0f4ab5a02133412b7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7daa2048_43cbb5a1",
        "filename": "tasks/multi_cell_v2_osp17/templates/post_tasks.sh",
        "patchSetId": 11
      },
      "lineNbr": 12,
      "author": {
        "id": 1010723
      },
      "writtenOn": "2022-10-24T14:17:54Z",
      "side": 1,
      "message": "yes, this revision is already fully adapted for https://review.opendev.org/c/openstack/tripleo-common/+/861804",
      "parentUuid": "69e793b1_1e61b333",
      "revId": "358c3c5017aafbce188661e0f4ab5a02133412b7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}