{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "f71820ab_c5a561f9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1017127
      },
      "writtenOn": "2022-02-25T18:02:33Z",
      "side": 1,
      "message": "Ran into issues with [1] converting everything to int. This update will take versions that are of type float and keeps them as a float and takes strings and convert them to the openstack version in the same approach as IR currently handles string conversion.  Summary of test results both in full jobs and simulations below:\n\n# Downstream Staging\ninfrared tripleo-config-changes                 --add-additional-cell yes                 --openstack-version 16.2\n...\n2022-02-24 18:04:38.318 | TASK [parse provided OSP version] **********************************************\n2022-02-24 18:04:38.320 | task path: /home/rhos-ci/jenkins/workspace/DFG-compute-nova-16.2_director-rhel-virthost-1cont_1comp_1cellcont_2cellcomp_1ipa-ipv4-geneve-multi-cell-tls-everywhere-phase3/infrared/plugins/tripleo-config-changes/tasks/multi_cell_v2_osp16/pre.yml:11\n2022-02-24 18:04:38.323 | Thursday 24 February 2022  18:04:38 +0000 (0:00:00.463)       0:00:16.084 ***** \n2022-02-24 18:04:38.381 | ok: [undercloud-0] \u003d\u003e {\n2022-02-24 18:04:38.383 |     \"ansible_facts\": {\n2022-02-24 18:04:38.386 |         \"oc_version\": \"16.2\",\n2022-02-24 18:04:38.388 |         \"osp_release\": \"16\"\n2022-02-24 18:04:38.390 |     },\n2022-02-24 18:04:38.392 |     \"changed\": false\n2022-02-24 18:04:38.394 | }\n2022-02-24 18:04:38.424 | \n2022-02-24 18:04:38.427 | TASK [set OSP version conditional based on provided version] *******************\n2022-02-24 18:04:38.429 | task path: /home/rhos-ci/jenkins/workspace/DFG-compute-nova-16.2_director-rhel-virthost-1cont_1comp_1cellcont_2cellcomp_1ipa-ipv4-geneve-multi-cell-tls-everywhere-phase3/infrared/plugins/tripleo-config-changes/tasks/multi_cell_v2_osp16/pre.yml:16\n2022-02-24 18:04:38.431 | Thursday 24 February 2022  18:04:38 +0000 (0:00:00.109)       0:00:16.194 ***** \n2022-02-24 18:04:38.492 | ok: [undercloud-0] \u003d\u003e {\n2022-02-24 18:04:38.495 |     \"ansible_facts\": {\n2022-02-24 18:04:38.497 |         \"version_to_use\": \"16.2\"\n2022-02-24 18:04:38.499 |     },\n2022-02-24 18:04:38.501 |     \"changed\": false\n2022-02-24 18:04:38.503 | }\n2022-02-24 18:04:38.527 | \n2022-02-24 18:04:38.530 | TASK [export cell-input.yaml file] *********************************************\n2022-02-24 18:04:38.532 | task path: /home/rhos-ci/jenkins/workspace/DFG-compute-nova-16.2_director-rhel-virthost-1cont_1comp_1cellcont_2cellcomp_1ipa-ipv4-geneve-multi-cell-tls-everywhere-phase3/infrared/plugins/tripleo-config-changes/tasks/multi_cell_v2_osp16/pre.yml:20\n2022-02-24 18:04:38.534 | Thursday 24 February 2022  18:04:38 +0000 (0:00:00.102)       0:00:16.296 ***** \n2022-02-24 18:04:38.591 | skipping: [undercloud-0] \u003d\u003e {\n2022-02-24 18:04:38.594 |     \"changed\": false,\n2022-02-24 18:04:38.596 |     \"skip_reason\": \"Conditional result was False\"\n2022-02-24 18:04:38.598 | }\n2022-02-24 18:04:38.617 | \n2022-02-24 18:04:38.619 | TASK [export cell-input.yaml file 16.2+] ***************************************\n2022-02-24 18:04:38.622 | task path: /home/rhos-ci/jenkins/workspace/DFG-compute-nova-16.2_director-rhel-virthost-1cont_1comp_1cellcont_2cellcomp_1ipa-ipv4-geneve-multi-cell-tls-everywhere-phase3/infrared/plugins/tripleo-config-changes/tasks/multi_cell_v2_osp16/pre.yml:26\n2022-02-24 18:04:38.624 | Thursday 24 February 2022  18:04:38 +0000 (0:00:00.089)       0:00:16.386 ***** \n2022-02-24 18:04:42.593 | changed: [undercloud-0] \u003d\u003e {\n2022-02-24 18:04:42.595 |     \"changed\": true,\n2022-02-24 18:04:42.597 |     \"cmd\": \"source ~/stackrc\\nopenstack overcloud cell export -f --output-file /home/stack/cell1/cell-input.yaml\\n\",\n2022-02-24 18:04:42.599 |     \"delta\": \"0:00:03.556508\",\n2022-02-24 18:04:42.601 |     \"end\": \"2022-02-24 18:04:42.567903\",\n2022-02-24 18:04:42.603 |     \"rc\": 0,\n2022-02-24 18:04:42.605 |     \"start\": \"2022-02-24 18:04:39.011395\"\n2022-02-24 18:04:42.607 | }\n\n# Downstream Staging 16.1\ninfrared tripleo-config-changes                 --add-additional-cell yes                 --openstack-version 16.1\n...\n2022-02-24 23:06:47.275 | TASK [parse provided OSP version] **********************************************\n2022-02-24 23:06:47.277 | task path: /home/rhos-ci/jenkins/workspace/DFG-compute-nova-16.1_director-rhel-virthost-1cont_1comp_1cellcont_2cellcomp_1ipa-ipv4-geneve-multi-cell-tls-everywhere-phase3/infrared/plugins/tripleo-config-changes/tasks/multi_cell_v2_osp16/pre.yml:11\n2022-02-24 23:06:47.279 | Thursday 24 February 2022  23:06:47 +0000 (0:00:00.484)       0:00:16.416 ***** \n2022-02-24 23:06:47.333 | ok: [undercloud-0] \u003d\u003e {\n2022-02-24 23:06:47.335 |     \"ansible_facts\": {\n2022-02-24 23:06:47.337 |         \"oc_version\": \"16.1\",\n2022-02-24 23:06:47.339 |         \"osp_release\": \"16\"\n2022-02-24 23:06:47.341 |     },\n2022-02-24 23:06:47.343 |     \"changed\": false\n2022-02-24 23:06:47.345 | }\n2022-02-24 23:06:47.354 | \n2022-02-24 23:06:47.356 | TASK [set OSP version conditional based on provided version] *******************\n2022-02-24 23:06:47.358 | task path: /home/rhos-ci/jenkins/workspace/DFG-compute-nova-16.1_director-rhel-virthost-1cont_1comp_1cellcont_2cellcomp_1ipa-ipv4-geneve-multi-cell-tls-everywhere-phase3/infrared/plugins/tripleo-config-changes/tasks/multi_cell_v2_osp16/pre.yml:16\n2022-02-24 23:06:47.360 | Thursday 24 February 2022  23:06:47 +0000 (0:00:00.081)       0:00:16.498 ***** \n2022-02-24 23:06:47.418 | ok: [undercloud-0] \u003d\u003e {\n2022-02-24 23:06:47.421 |     \"ansible_facts\": {\n2022-02-24 23:06:47.423 |         \"version_to_use\": \"16.1\"\n2022-02-24 23:06:47.425 |     },\n2022-02-24 23:06:47.426 |     \"changed\": false\n2022-02-24 23:06:47.428 | }\n2022-02-24 23:06:47.440 | \n2022-02-24 23:06:47.442 | TASK [export cell-input.yaml file] *********************************************\n2022-02-24 23:06:47.444 | task path: /home/rhos-ci/jenkins/workspace/DFG-compute-nova-16.1_director-rhel-virthost-1cont_1comp_1cellcont_2cellcomp_1ipa-ipv4-geneve-multi-cell-tls-everywhere-phase3/infrared/plugins/tripleo-config-changes/tasks/multi_cell_v2_osp16/pre.yml:20\n2022-02-24 23:06:47.446 | Thursday 24 February 2022  23:06:47 +0000 (0:00:00.085)       0:00:16.584 ***** \n2022-02-24 23:06:51.558 | changed: [undercloud-0] \u003d\u003e {\n2022-02-24 23:06:51.560 |     \"changed\": true,\n2022-02-24 23:06:51.562 |     \"cmd\": \"source ~/stackrc\\nopenstack overcloud cell export cell1 -f -o /home/stack/cell1/cell-input.yaml\\n\",\n2022-02-24 23:06:51.565 |     \"delta\": \"0:00:03.748890\",\n2022-02-24 23:06:51.567 |     \"end\": \"2022-02-24 23:06:51.532795\",\n2022-02-24 23:06:51.569 |     \"rc\": 0,\n2022-02-24 23:06:51.571 |     \"start\": \"2022-02-24 23:06:47.783905\"\n2022-02-24 23:06:51.573 | }\n\n# Testing Downstream\n# Version: 16\ninfrared tripleo-config-changes     --add-additional-cell yes --openstack-version 16\n...\nTASK [parse provided OSP version] **************************************************************************************************************************************************\nFriday 25 February 2022  17:52:30 +0000 (0:00:01.640)       0:00:21.305 ******* \nok: [undercloud-0]\n\nTASK [set OSP version conditional based on provided version] ***********************************************************************************************************************\nFriday 25 February 2022  17:52:30 +0000 (0:00:00.072)       0:00:21.378 ******* \nok: [undercloud-0]\n\nTASK [debug] ***********************************************************************************************************************************************************************\nFriday 25 February 2022  17:52:30 +0000 (0:00:00.072)       0:00:21.451 ******* \nok: [undercloud-0] \u003d\u003e {\n    \"msg\": \"Debug version to use: 16\"\n}\n\nTASK [Legacy export Command] *******************************************************************************************************************************************************\nFriday 25 February 2022  17:52:30 +0000 (0:00:00.077)       0:00:21.528 ******* \nchanged: [undercloud-0]\n\nTASK [New export Command] **********************************************************************************************************************************************************\nFriday 25 February 2022  17:52:32 +0000 (0:00:01.595)       0:00:23.123 ******* \nskipping: [undercloud-0]\n\n# Version: train\ninfrared tripleo-config-changes     --add-additional-cell yes --openstack-version train\n...\nTASK [parse provided OSP version] **************************************************************************************************************************************************\nFriday 25 February 2022  17:53:47 +0000 (0:00:01.582)       0:00:22.033 ******* \nok: [undercloud-0]\n\nTASK [set OSP version conditional based on provided version] ***********************************************************************************************************************\nFriday 25 February 2022  17:53:47 +0000 (0:00:00.060)       0:00:22.094 ******* \nok: [undercloud-0]\n\nTASK [debug] ***********************************************************************************************************************************************************************\nFriday 25 February 2022  17:53:47 +0000 (0:00:00.057)       0:00:22.151 ******* \nok: [undercloud-0] \u003d\u003e {\n    \"msg\": \"Debug version to use: 16\"\n}\n\nTASK [Legacy export Command] *******************************************************************************************************************************************************\nFriday 25 February 2022  17:53:47 +0000 (0:00:00.057)       0:00:22.209 ******* \nchanged: [undercloud-0]\n\nTASK [New export Command] **********************************************************************************************************************************************************\nFriday 25 February 2022  17:53:48 +0000 (0:00:01.603)       0:00:23.813 ******* \nskipping: [undercloud-0]\n\n# Version: victoria\ninfrared tripleo-config-changes     --add-additional-cell yes --openstack-version victoria\n...\nTASK [parse provided OSP version] **************************************************************************************************************************************************\nFriday 25 February 2022  17:54:45 +0000 (0:00:01.691)       0:00:21.139 ******* \nok: [undercloud-0]\n\nTASK [set OSP version conditional based on provided version] ***********************************************************************************************************************\nFriday 25 February 2022  17:54:45 +0000 (0:00:00.059)       0:00:21.198 ******* \nok: [undercloud-0]\n\nTASK [debug] ***********************************************************************************************************************************************************************\nFriday 25 February 2022  17:54:46 +0000 (0:00:00.057)       0:00:21.255 ******* \nok: [undercloud-0] \u003d\u003e {\n    \"msg\": \"Debug version to use: 18\"\n}\n\nTASK [Legacy export Command] *******************************************************************************************************************************************************\nFriday 25 February 2022  17:54:46 +0000 (0:00:00.055)       0:00:21.311 ******* \nskipping: [undercloud-0]\n\nTASK [New export Command] **********************************************************************************************************************************************************\nFriday 25 February 2022  17:54:46 +0000 (0:00:00.053)       0:00:21.364 ******* \nchanged: [undercloud-0]\n\n# Version: 17.0\ninfrared tripleo-config-changes     --add-additional-cell yes --openstack-version 17.0\n...\nTASK [parse provided OSP version] **************************************************************************************************************************************************\nFriday 25 February 2022  17:56:27 +0000 (0:00:01.568)       0:00:21.063 ******* \nok: [undercloud-0]\n\nTASK [set OSP version conditional based on provided version] ***********************************************************************************************************************\nFriday 25 February 2022  17:56:27 +0000 (0:00:00.058)       0:00:21.121 ******* \nok: [undercloud-0]\n\nTASK [debug] ***********************************************************************************************************************************************************************\nFriday 25 February 2022  17:56:27 +0000 (0:00:00.056)       0:00:21.178 ******* \nok: [undercloud-0] \u003d\u003e {\n    \"msg\": \"Debug version to use: 17.0\"\n}\n\nTASK [Legacy export Command] *******************************************************************************************************************************************************\nFriday 25 February 2022  17:56:27 +0000 (0:00:00.056)       0:00:21.234 ******* \nskipping: [undercloud-0]\n\nTASK [New export Command] **********************************************************************************************************************************************************\nFriday 25 February 2022  17:56:27 +0000 (0:00:00.057)       0:00:21.292 ******* \nchanged: [undercloud-0]\n\n",
      "revId": "23dd46d24e1b85b267f8e87f7474d423ca088ffc",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "13a8d281_ae6e333d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1012743
      },
      "writtenOn": "2022-02-28T15:00:24Z",
      "side": 1,
      "message": "Can you also post the microversion error being resolved with this patch? maybe just the task or similar",
      "revId": "23dd46d24e1b85b267f8e87f7474d423ca088ffc",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8587a322_2eaadd74",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1017127
      },
      "writtenOn": "2022-02-28T15:10:46Z",
      "side": 1,
      "message": "I do not believe this upstream change was associated with a specific microversion, checking COMPUTE API microversion history I also do not see anything mentioning the change. It purely a 16.1 to 16.2 change from downstream perspective.",
      "parentUuid": "13a8d281_ae6e333d",
      "revId": "23dd46d24e1b85b267f8e87f7474d423ca088ffc",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}